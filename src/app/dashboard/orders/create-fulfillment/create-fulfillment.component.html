<div class="create-fulfillment-container">
    <h2>Create Fulfillment</h2>
    <button type="button" color="primary" mat-raised-button (click)="back()">Back</button>
    <form [formGroup]="addLineForm" #addLineFormDirective="ngForm" (ngSubmit)="addLine(); addLineFormDirective.resetForm()">
        <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field>
                <mat-label>Order Line</mat-label>
                <mat-select formControlName="orderLine">
                    <mat-option [value]="line" *ngFor="let line of orderLines">
                        {{ line.productName + (!!line.variantName ? (' [' + line.variantName + ']') : '') + ', Q:' +
                        line.quantity + ', R:' + line.reservedQuantity + ', F:' + line.fulfilledQuantity }}
                    </mat-option>
                </mat-select>
                <mat-error>An order line is required</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Quantity</mat-label>
                <input matInput type="number" formControlName="quantity">
                <mat-error>A valid quantity is required</mat-error>
            </mat-form-field>
        </div>
        <div>
            <button type="submit" color="primary" mat-raised-button [disabled]="addLineForm.invalid">Add</button>
        </div>
    </form>
    <mat-divider></mat-divider>
    <mat-list>
        <mat-list-item *ngFor="let line of lines">
            <span style="margin-right: 4px;">{{ line.orderLine.productName + (!!line.orderLine.variantName ? (' [' +
                line.orderLine.variantName + ']') : '') + ', ' + line.quantity }}</span>
            <button type="button" color="primary" mat-raised-button (click)="removeLine(line)">Remove</button>
        </mat-list-item>
    </mat-list>
    <button type="button" color="primary" mat-raised-button (click)="createFulfillment()"
        [disabled]="lines.length == 0">Create</button>
</div>